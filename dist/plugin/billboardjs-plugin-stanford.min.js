/*!
 * Copyright (c) 2017 ~ present NAVER Corp.
 * billboard.js project is licensed under the MIT license
 *
 * billboard.js, JavaScript chart library
 * https://naver.github.io/billboard.js/
 *
 * @version 3.9.3
 * @requires billboard.js
 * @summary billboard.js plugin
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3-interpolate"),require("d3-color"),require("d3-scale"),require("d3-selection"),require("d3-brush"),require("d3-axis"),require("d3-format")):"function"==typeof define&&define.amd?define("bb",["d3-interpolate","d3-color","d3-scale","d3-selection","d3-brush","d3-axis","d3-format"],e):"object"==typeof exports?exports.bb=e(require("d3-interpolate"),require("d3-color"),require("d3-scale"),require("d3-selection"),require("d3-brush"),require("d3-axis"),require("d3-format")):(t.bb=t.bb||{},t.bb.plugin=t.bb.plugin||{},t.bb.plugin.stanford=e(t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3))}(this,(function(t,e,n,i,r,o,s){return function(){"use strict";var a={272:function(t){t.exports=o},514:function(t){t.exports=r},947:function(t){t.exports=e},936:function(t){t.exports=s},560:function(e){e.exports=t},379:function(t){t.exports=n},288:function(t){t.exports=i}},c={};function l(t){var e=c[t];if(void 0!==e)return e.exports;var n=c[t]={exports:{}};return a[t](n,n.exports,l),n.exports}l.d=function(t,e){for(var n in e)l.o(e,n)&&!l.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var b={};return function(){function t(t,e){if(t!==e)throw new TypeError("Cannot instantiate an arrow function")}function e(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n(t,e){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},n(t,e)}l.d(b,{default:function(){return K}});var i=l(560),r=l(947),o=l(379);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===s(e)?e:String(e)}function c(t,e,n){return(e=a(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function d(t){for(var e,n=1;n<arguments.length;n++)e=null!=arguments[n]?arguments[n]:{},n%2?u(Object(e),!0).forEach((function(n){c(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):u(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}));return t}const h={tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name"};d(d(d(d(d(d(d(d(d(d(d(d(d(d(d(d(d(d(d(d(d(d(d(d({},{button:"bb-button",chart:"bb-chart",empty:"bb-empty",main:"bb-main",target:"bb-target",EXPANDED:"_expanded_"}),{arc:"bb-arc",arcLabelLine:"bb-arc-label-line",arcs:"bb-arcs",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsTitle:"bb-chart-arcs-title",needle:"bb-needle"}),{area:"bb-area",areas:"bb-areas"}),{axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label"}),{bar:"bb-bar",bars:"bb-bars",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars"}),{candlestick:"bb-candlestick",candlesticks:"bb-candlesticks",chartCandlestick:"bb-chart-candlestick",chartCandlesticks:"bb-chart-candlesticks",valueDown:"bb-value-down",valueUp:"bb-value-up"}),{chartCircles:"bb-chart-circles",circle:"bb-circle",circles:"bb-circles"}),{colorPattern:"bb-color-pattern",colorScale:"bb-colorscale"}),{dragarea:"bb-dragarea",INCLUDED:"_included_"}),{chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",gaugeValue:"bb-gauge-value"}),{legend:"bb-legend",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile"}),{chartLine:"bb-chart-line",chartLines:"bb-chart-lines",line:"bb-line",lines:"bb-lines"}),{eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single"}),{focused:"bb-focused",defocused:"bb-defocused",legendItemFocused:"bb-legend-item-focused",xgridFocus:"bb-xgrid-focus",ygridFocus:"bb-ygrid-focus"}),{grid:"bb-grid",gridLines:"bb-grid-lines",xgrid:"bb-xgrid",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids"}),{chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars"}),{region:"bb-region",regions:"bb-regions"}),{selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",SELECTED:"_selected_"}),{shape:"bb-shape",shapes:"bb-shapes"}),{brush:"bb-brush",subchart:"bb-subchart"}),{chartText:"bb-chart-text",chartTexts:"bb-chart-texts",text:"bb-text",texts:"bb-texts",title:"bb-title",TextOverlapping:"text-overlapping"}),h),{treemap:"bb-treemap",chartTreemap:"bb-chart-treemap",chartTreemaps:"bb-chart-treemaps"}),{buttonZoomReset:"bb-zoom-reset",zoomBrush:"bb-zoom-brush"}),l(288),l(514);var f=void 0;const p=function(){t(this,f);return"object"==typeof globalThis&&null!==globalThis&&globalThis.Object===Object&&globalThis||"object"==typeof global&&null!==global&&global.Object===Object&&global||"object"==typeof self&&null!==self&&self.Object===Object&&self||Function("return this")()}.bind(void 0)(),g="function"==typeof p.requestAnimationFrame,v="function"==typeof p.requestIdleCallback,y=g?p.requestAnimationFrame:function(e){return t(this,f),setTimeout(e,1)}.bind(void 0),m=g?p.cancelAnimationFrame:function(e){return t(this,f),clearTimeout(e)}.bind(void 0),x=(v&&p.requestIdleCallback,v&&p.cancelIdleCallback,null==p?void 0:p.document);var w=void 0;(function(e){return t(this,w),e||0===e}).bind(void 0);const S=function(e){return t(this,w),"function"==typeof e}.bind(void 0),_=function(e){return t(this,w),"string"==typeof e}.bind(void 0),E=function(e){return t(this,w),"number"==typeof e}.bind(void 0),O=function(e){return t(this,w),void 0===e}.bind(void 0),j=function(e){return t(this,w),void 0!==e}.bind(void 0),C=(function(e){return t(this,w),"boolean"==typeof e}.bind(void 0),function(e){return t(this,w),10*Math.ceil(e/10)}.bind(void 0),function(e){return t(this,w),Math.ceil(e)+.5}.bind(void 0),function(e){return t(this,w),e[1]-e[0]}.bind(void 0),function(e){return t(this,w),"object"==typeof e}.bind(void 0)),$=function(e){return t(this,w),O(e)||null===e||_(e)&&0===e.length||C(e)&&!(e instanceof Date)&&0===Object.keys(e).length||E(e)&&isNaN(e)}.bind(void 0),M=(function(e){return t(this,w),!$(e)}.bind(void 0),function(e){return t(this,w),Array.isArray(e)}.bind(void 0)),T=function(e){return t(this,w),e&&!(null!=e&&e.nodeType)&&C(e)&&!M(e)}.bind(void 0);(function(e){return t(this,w),e.charAt(0).toUpperCase()+e.slice(1)}).bind(void 0);(function(e){return t(this,w),[].slice.call(e)}).bind(void 0);function k(e){for(var n=this,i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];if(!r.length||1===r.length&&!r[0])return e;const s=r.shift();return T(e)&&T(s)&&Object.keys(s).forEach(function(i){t(this,n);const r=s[i];T(r)?(e[i]||(e[i]={}),e[i]=k(e[i],r)):e[i]=M(r)?r.concat():r}.bind(this)),k.apply(void 0,[e].concat(r))}const P=function(e,n,i){void 0===i&&(i=1),t(this,w);const r=[],o=0|Math.max(0,Math.ceil((n-e)/i));for(let t=e;t<o;t++)r.push(e+t*i);return r}.bind(void 0);(function(){var e=this;t(this,w);const n=function(){return t(this,e),{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0}}.bind(this);try{return new MouseEvent("t"),function(i,r,o){void 0===o&&(o=n()),t(this,e),i.dispatchEvent(new MouseEvent(r,o))}.bind(this)}catch(i){return function(i,r,o){void 0===o&&(o=n()),t(this,e);const s=x.createEvent("MouseEvent");s.initMouseEvent(r,o.bubbles,o.cancelable,p,0,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),i.dispatchEvent(s)}.bind(this)}}).bind(void 0)(),function(e,n,i){t(this,w);const r=new Touch(k({identifier:Date.now(),target:e,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},i));e.dispatchEvent(new TouchEvent(n,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[r],targetTouches:[],changedTouches:[r]}))}.bind(void 0);function D(t){let e;if(t instanceof Date)e=t;else if(_(t)){var n;const i=this.config;e=null!=(n=this.format.dataTime(i.data_xFormat)(t))?n:new Date(t)}else E(t)&&!isNaN(t)&&(e=new Date(+t));return e&&!isNaN(+e)||console&&console.error&&console.error("Failed to parse x '"+t+"' to Date object"),e}function A(e){var n=this;const i=this.config;let r,o,s;const a=function(){t(this,n);const e=o.shift();return e&&r&&C(r)&&e in r?(r=r[e],a()):e?void 0:r}.bind(this);Object.keys(i).forEach(function(c){t(this,n),r=e,o=c.split("_"),s=a(),j(s)&&(i[c]=s)}.bind(this)),this.api&&(this.state.orgConfig=e)}let q=function(){function e(t){void 0===t&&(t={}),this.$$=void 0,this.options=void 0,this.options=t}var n=e.prototype;return n.$beforeInit=function(){},n.$init=function(){},n.$afterInit=function(){},n.$redraw=function(){},n.$willDestroy=function(){var e=this;Object.keys(this).forEach(function(n){t(this,e),this[n]=null,delete this[n]}.bind(this))},e}();q.version="3.9.3";let L=function(){return{colors:void 0,epochs:[],lines:[],scale_min:void 0,scale_max:void 0,scale_width:20,scale_format:void 0,padding_top:0,padding_right:0,padding_bottom:0,padding_left:0,regions:[]}};var F="bb-colorscale",N="bb-stanford-elements",I="bb-stanford-line",R="bb-stanford-lines",B="bb-stanford-region",X="bb-stanford-regions";function Y(t,e){return t.epochs<e.epochs?-1:t.epochs>e.epochs?1:0}function V(t){const e=function(t){let e,n,i=0;for(let r=0,o=t.length,s=o-1;r<o;s=r,r++)e=t[r],n=t[s],i+=e.x*n.y,i-=e.y*n.x;return i/=2,i}(t);let n,i=0,r=0;for(let e=0,o=t.length,s=o-1;e<o;s=e,e++){const o=t[e],a=t[s];n=o.x*a.y-a.x*o.y,i+=(o.x+a.x)*n,r+=(o.y+a.y)*n}return n=6*e,{x:i/n,y:r/n}}let z=function(){function e(t){this.owner=void 0,this.owner=t;const e=t.$$.$el.main.select(".bb-chart").append("g").attr("class",N);e.append("g").attr("class",R),e.append("g").attr("class",X)}var n=e.prototype;return n.updateStanfordLines=function(e){var n=this;const i=this.owner.$$,r=i.config,o=i.$el.main,s=r.axis_rotated,a=this.xvCustom.bind(i),c=this.yvCustom.bind(i),l=o.select("."+R).style("shape-rendering","geometricprecision").selectAll("."+I).data(this.owner.config.lines);l.exit().transition().duration(e).style("opacity","0").remove();const b=l.enter().append("g");b.append("line").style("opacity","0"),b.merge(l).attr("class",function(e){return t(this,n),I+(e.class?" "+e.class:"")}.bind(this)).select("line").transition().duration(e).attr("x1",function(e){return t(this,n),s?c(e,"y1"):a(e,"x1")}.bind(this)).attr("x2",function(e){return t(this,n),s?c(e,"y2"):a(e,"x2")}.bind(this)).attr("y1",function(e){return t(this,n),s?a(e,"x1"):c(e,"y1")}.bind(this)).attr("y2",function(e){return t(this,n),s?a(e,"x2"):c(e,"y2")}.bind(this)).transition().style("opacity",null)},n.updateStanfordRegions=function(e){var n=this;const i=this.owner.$$,r=i.config,o=i.$el.main,s=r.axis_rotated,a=this.xvCustom.bind(i),c=this.yvCustom.bind(i),l=this.owner.countEpochsInRegion.bind(i);let b=o.select("."+X).selectAll("."+B).data(this.owner.config.regions);b.exit().transition().duration(e).style("opacity","0").remove();const u=b.enter().append("g");u.append("polygon").style("opacity","0"),u.append("text").attr("transform",s?"rotate(-90)":"").style("opacity","0"),b=u.merge(b),b.attr("class",function(e){return t(this,n),B+(e.class?" "+e.class:"")}.bind(this)).select("polygon").transition().duration(e).attr("points",function(e){var i=this;return t(this,n),e.points.map(function(e){return t(this,i),[s?c(e,"y"):a(e,"x"),s?a(e,"x"):c(e,"y")].join(",")}.bind(this)).join(" ")}.bind(this)).transition().style("opacity",function(e){return t(this,n),(e.opacity?e.opacity:.2)+""}.bind(this)),b.select("text").transition().duration(e).attr("x",function(e){return t(this,n),s?c(V(e.points),"y"):a(V(e.points),"x")}.bind(this)).attr("y",function(e){return t(this,n),s?a(V(e.points),"x"):c(V(e.points),"y")}.bind(this)).text(function(e){if(t(this,n),e.text){const t=l(e.points),n=t.value,i=t.percentage;return e.text(n,i)}return""}.bind(this)).attr("text-anchor","middle").attr("dominant-baseline","middle").transition().style("opacity",null)},n.updateStanfordElements=function(t){void 0===t&&(t=0),this.updateStanfordLines(t),this.updateStanfordRegions(t)},n.xvCustom=function(t,e){const n=this,i=n.axis,r=n.config;let o=e?t[e]:n.getBaseValue(t);return i.isTimeSeries()?o=D.call(n,o):i.isCategorized()&&_(o)&&(o=r.axis_x_categories.indexOf(t.value)),Math.ceil(n.scale.x(o))},n.yvCustom=function(t,e){const n=this,i=t.axis&&"y2"===t.axis?n.scale.y2:n.scale.y,r=e?t[e]:n.getBaseValue(t);return Math.ceil(i(r))},e}();var G=l(272),U=l(936);let H=function(){function e(t){this.owner=void 0,this.colorScale=void 0,this.owner=t}var n=e.prototype;return n.drawColorScale=function(){var e=this;const n=this.owner,i=n.$$,r=n.config,s=i.data.targets[0],a=i.state.height-r.padding_bottom-r.padding_top,c=r.scale_width,l=P(r.padding_bottom,a,5),b=(0,o.scaleSequential)(s.colors).domain([l[l.length-1],l[0]]);this.colorScale&&this.colorScale.remove(),this.colorScale=i.$el.svg.append("g").attr("width",50).attr("height",a).attr("class",F),this.colorScale.append("g").attr("transform","translate(0, "+r.padding_top+")").selectAll("bars").data(l).enter().append("rect").attr("y",function(n,i){return t(this,e),5*i}.bind(this)).attr("x",0).attr("width",c).attr("height",5).attr("fill",function(n){return t(this,e),b(n)}.bind(this));const u=(0,o.scaleSymlog)().domain([s.minEpochs,s.maxEpochs]).range([l[0]+r.padding_top+l[l.length-1]+5-1,l[0]+r.padding_top]),d=(0,G.axisRight)(u),h=r.scale_format;"pow10"===h?d.tickValues([1,10,100,1e3,1e4,1e5,1e6,1e7]):S(h)?d.tickFormat(h):d.tickFormat((0,U.format)("d"));const f=this.colorScale.append("g").attr("class","legend axis").attr("transform","translate("+c+",0)").call(d);"pow10"===h&&f.selectAll(".tick text").text(null).filter(function(n){return t(this,e),n/Math.pow(10,Math.ceil(Math.log(n)/Math.LN10-1e-12))==1}.bind(this)).text(10).append("tspan").attr("dy","-.7em").text(function(n){return t(this,e),Math.round(Math.log(n)/Math.LN10)}.bind(this)),this.colorScale.attr("transform","translate("+(i.state.current.width-this.xForColorScale())+", 0)")},n.xForColorScale=function(){return this.owner.config.padding_right+this.colorScale.node().getBBox().width},n.getColorScalePadding=function(){return this.xForColorScale()+this.owner.config.padding_left+20},e}(),K=function(s){var a,c;function l(t){var n=s.call(this,t)||this;return n.config=void 0,n.colorScale=void 0,n.elements=void 0,n.config=new L,e(n)||e(n)}c=s,(a=l).prototype=Object.create(c.prototype),a.prototype.constructor=a,n(a,c);var b=l.prototype;return b.$beforeInit=function(){var e=this;const n=this.$$;n.config.data_xSort=!1,n.isMultipleX=function(){return t(this,e),!0}.bind(this),n.showGridFocus=function(){t(this,e)}.bind(this),n.labelishData=function(n){return t(this,e),n.values}.bind(this),n.opacityForCircle=function(){return t(this,e),1}.bind(this);const i=n.getCurrentPaddingRight.bind(n);n.getCurrentPaddingRight=function(){return t(this,e),i()+(this.colorScale?this.colorScale.getColorScalePadding():0)}.bind(this)},b.$init=function(){const t=this.$$;A.call(this,this.options),t.color=this.getStanfordPointColor.bind(t),this.colorScale=new H(this),this.elements=new z(this),this.convertData(),this.initStanfordData(),this.setStanfordTooltip(),this.colorScale.drawColorScale(),this.$redraw()},b.$redraw=function(t){var e,n;null==(e=this.colorScale)||e.drawColorScale(),null==(n=this.elements)||n.updateStanfordElements(t)},b.getOptions=function(){return new L},b.convertData=function(){var e=this;const n=this.$$.data.targets,i=this.options.epochs;n.forEach(function(n){var r=this;t(this,e),n.values.forEach(function(e,n){t(this,r),e.epochs=i[n]}.bind(this)),n.minEpochs=void 0,n.maxEpochs=void 0,n.colors=void 0,n.colorscale=void 0}.bind(this))},b.xvCustom=function(t,e){const n=this,i=n.axis,r=n.config;let o=e?t[e]:n.getBaseValue(t);return i.isTimeSeries()?o=D.call(n,o):i.isCategorized()&&_(o)&&(o=r.axis_x_categories.indexOf(t.value)),Math.ceil(n.scale.x(o))},b.yvCustom=function(t,e){const n=this.scale,i=t.axis&&"y2"===t.axis?n.y2:n.y,r=e?t[e]:this.getBaseValue(t);return Math.ceil(i(r))},b.initStanfordData=function(){var e=this;const n=this.config,s=this.$$.data.targets[0];s.values.sort(Y);const a=s.values.map(function(n){return t(this,e),n.epochs}.bind(this));s.minEpochs=isNaN(n.scale_min)?Math.min.apply(Math,a):n.scale_min,s.maxEpochs=isNaN(n.scale_max)?Math.max.apply(Math,a):n.scale_max,s.colors=S(n.colors)?n.colors:(0,i.interpolateHslLong)((0,r.hsl)(250,1,.5),(0,r.hsl)(0,1,.5)),s.colorscale=(0,o.scaleSequentialLog)(s.colors).domain([s.minEpochs,s.maxEpochs])},b.getStanfordPointColor=function(t){return this.data.targets[0].colorscale(t.epochs)},b.setStanfordTooltip=function(){const e=this.$$.config;$(e.tooltip_contents)&&(e.tooltip_contents=function(n,i,r,o){var s=this;const a=e.data_x;let c='<table class="'+h.tooltip+'"><tbody>';return n.forEach(function(e){t(this,s);const n=e.id,l=void 0===n?"":n,b=e.value,u=void 0===b?0:b,d=e.epochs,f=void 0===d?0:d,p=e.x;c+="<tr>\n\t\t\t\t\t\t\t<th>"+(a||"")+'</th>\n\t\t\t\t\t\t\t<th class="value">'+i(void 0===p?"":p)+"</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>"+e.id+'</th>\n\t\t\t\t\t\t\t<th class="value">'+r(u)+'</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr class="'+h.tooltipName+"-"+l+'">\n\t\t\t\t\t\t\t<td class="name"><span style="background-color:'+o(e)+'"></span>Epochs</td>\n\t\t\t\t\t\t\t<td class="value">'+r(f)+"</td>\n\t\t\t\t\t\t</tr>"}.bind(this)),c+"</tbody></table>"})},b.countEpochsInRegion=function(e){var n=this;const i=this.data.targets[0],r=i.values.reduce(function(e,i){return t(this,n),e+ +i.epochs}.bind(this),0),o=i.values.reduce(function(i,r){return t(this,n),function(t,e){const n=t.x,i=t.value;let r=!1;for(let t=0,o=e.length-1;t<e.length;o=t++){const s=e[t].x,a=e[t].y,c=e[o].x,l=e[o].y;a>i!=l>i&&n<(c-s)*(i-a)/(l-a)+s&&(r=!r)}return r}(r,e)?i+ +r.epochs:i}.bind(this),0);return{value:o,percentage:0!==o?+(o/r*100).toFixed(1):0}},l}(q)}(),b=b.default}()}));